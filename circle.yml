## configuration file for Circle continuous integration

general:
  branches:
    ignore:
      - master # list of branches to ignore
      - /feature-*/ # or ignore regexes

database:
  post:
    - psql -f data_migration/app_documenttype_data.sql


deployment:
  staging:
    branch: staging
    commands:
      - git push git@heroku.com:benefitmy-python-staging.git $CIRCLE_SHA1:master
      - heroku run python manage.py makemigrations --app benefitmy-python-staging
      - heroku run python manage.py migrate --app benefitmy-python-staging

