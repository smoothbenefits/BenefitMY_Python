## configuration file for Circle continuous integration

general:
  branches:
    only:
      - dev
      - staging
      - demo
      - beta
      - prod

test:
  pre:
    - npm install
    - python manage.py collectstatic
  override:
    - python manage.py test

deployment:
  staging:
    branch: staging
    commands:
      - sh ./deployment.sh benefitmy-python-staging HEROKU_POSTGRESQL_NAVY
  demo:
    branch: demo
    commands:
      - sh ./deployment.sh benefitmy-python-demo HEROKU_POSTGRESQL_BROWN
  beta:
    branch: beta
    commands:
      - sh ./deployment.sh benefitmy-python-beta HEROKU_POSTGRESQL_PINK

