<div class="breadcrumb">
    <a ng-click="backtoDashboard()">{{role}} Dashboard</a>
    <span>View Benefits</span>
</div>

<div class="content-header">
    <h1>{{client.name}} Benefits</h1>
    <span class="general-info">Total <b>{{benefitCount}}</b> benefits</span>
    <div class="cta" ng-if="showAddBenefitButton"><a ng-click="addBenefitLinkClicked()" class="btn green">Add new benefit</a></div>
</div><!-- / .content-header -->

<div class="content-body">

    <!-- Here is the medical benefit section -->

    <div class="table-responsive table-holder" ng-show="medicalBenefitGroup.benefitNameArray.length > 0">
        <table class="table table-striped medical-plan-display-table">
            <thead>
                <th colspan="2"><span>{{medicalBenefitGroup.groupTitle}}</span></th>
                <th colspan="6" ng-repeat="benefitName in medicalBenefitGroup.benefitNameArray" class="benefit-name">
                    <span>
                        {{benefitName.name}}
                        <a class="delete-cross" ng-show="benefitDeletable" ng-click="deleteBenefit(benefitName.id)" href="javascript:void(0);">X</a>
                    </span>
                </th>
            </thead>
            <tbody>
                <tr class="title-row">
                    <td colspan="2" class="plan-row-head"><span>Plans Premium</span></td>
                    <td ng-repeat="benefitOption in medicalBenefitGroup.benefitOptionMetaArray" colspan="{{benefitOption.colspan}}">
                        <span>{{benefitOption.name}}</span>
                    </td>
                </tr>
                <tr class="value-row" ng-repeat="optionValue in medicalBenefitGroup.benefitOptionValueArray">
                    <td colspan="2" class="row-head"><span>{{optionValue.optionName}}</span></td>
                    <td ng-repeat="cost in optionValue.benefitCostArray" colspan="{{cost.colspan}}"><span>{{cost.value}}</span></td>
                </tr>
                <tr class="title-row">
                    <td colspan="2"><span>Options</span> <a ng-click="sortBy('name')">(sort)</a></td>
                    <td ng-repeat="benefitPolicy in medicalBenefitGroup.policyNameArray", colspan="{{benefitPolicy.colspan}}">
                        <span>{{benefitPolicy.name}}</span>
                    </td>
                </tr>
                <tr class="value-row" ng-repeat="policyListMember in medicalBenefitGroup.policyList | orderBy: medicalPolicyPredicate : medicalPolicyReverse">
                    <td colspan="2" class="row-head"><span>{{policyListMember.name}}</span></td>
                    <td ng-repeat="policyValue in policyListMember.valueArray", colspan="{{policyValue.colspan}}">
                        <span>{{policyValue.value}}</span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Here is the non medical benefit section -->
    <div class="table-responsive table-holder" ng-repeat="benefitArray in nonMedicalBenefitArray">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th><span>{{benefitArray.type}}</span></th>
                    <th width="250"><span>Types</span></th>
                    <th width="180"><span>Total Premiums<br />(per month)</span></th>
                    <th width="180"><span>Employee Premiums<br />(per pay period)</span></th>
                </tr>
            </thead>
            <tbody>

                <tr ng-repeat="benefit in benefitArray.benefitList">
                    <td style="vertical-align: top;">
                        {{benefit.name}}
                        <a class="delete-cross" ng-show="benefitDeletable" ng-click="deleteBenefit(benefit.id)" href="javascript:void(0);">X</a>
                    </td>
                    <td colspan="3" style="padding: 0;">
                        <table class="table">
                            <tr ng-repeat="option in benefit.options">
                                <td width="250">{{option.optionType}}</td>
                                <td width="180">${{option.totalCost}}</td>
                                <td width="180">${{option.employeeCost}}</td>
                            </tr>
                        </table>
                    </td>
                </tr>

            </tbody>
        </table>
    </div>

    <div class="table-responsive table-holder" ng-if="lifeInsurancePlans && lifeInsurancePlans.length > 0">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th><span>Life Insurance</span></th>
                    <th><span>Enrollment Date</span></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="lifeInsurancePlan in lifeInsurancePlans">
                    <td>
                        {{lifeInsurancePlan.life_insurance_plan.name}} 
                        <span ng-show="lifeInsurancePlan.life_insurance_plan.insurance_type === 'Basic'">({{lifeInsurancePlan.life_insurance_plan.insurance_type}} with amount of ${{lifeInsurancePlan.insurance_amount}})</span>
                        <a class="delete-cross" ng-show="benefitDeletable" ng-click="deleteLifeInsurancePlan(lifeInsurancePlan)" href="javascript:void(0);">X</a>
                    </td>
                    <td >
                        {{lifeInsurancePlan.created_date_for_display}}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="back"><a href="javascript:void(0);" ng-click="backtoDashboard()">&laquo; Back</a></div>
</div>
