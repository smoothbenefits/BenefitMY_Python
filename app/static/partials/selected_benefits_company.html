<div class="breadcrumb">
    <a ng-click="backToDashboard()">{{getCurRoleString()}} Dashboard</a>
    <span>{{getCurRoleString()}} Dashboard</span>
</div>

<div class="content-header">
    <h1>Employee Benefit Elections for {{companyName}}</h1>
    <span class="general-info">Total <b>{{clientCount}}</b> employees</span>
    <div><a ng-href="{{exportCompanyEmployeeSummaryUrl}}"><b>Download Complete Report</b></a></div>
    <div><a ng-href="{{exportCompanyEmployeeDirectDepositUrl}}" ng-show="isCurRoleAdmin()"><b>Download Direct Deposit Report</b></a></div>
    <div><a ng-href="{{exportCompanyEmployeeLifeBeneficiarySummaryUrl}}"><b>Download Life Insurance Beneficiary Report</b></a></div>
    <div class="cta"><span class="btn green" ng-click="back()">Back</span></div>
</div><!-- / .content-header -->

<div class="content-body">
    <div class="panel" ng-repeat="employee in employeeList | orderBy:'name'">
        <div class="panel-head">
            <a ng-click="viewDetails(employee.user.id)">{{employee.user.first_name}} {{employee.user.last_name}}</a>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-2">                
                    <div>Benefit Plan Selections</div>
                </div>
                <div class="col-sm-10">
                    <div class="table-responsive table-holder">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th width="300"><span>Selected Plan</span></th>
                                    <th width="250"><span>Enrolled Member</span></th>
                                    <th width="150"><span>Last Update</span></th>
                                    <th width="100"><span>Waived</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="2" style="padding: 0;">
                                        <table class="table">
                                            <tr ng-repeat="plan in employee.benefits">
                                                <td width="300">{{plan.selectedPlanName}} 
                                                    <span ng-show="plan.selectedPlanType">({{plan.selectedPlanType}})</span>
                                                    <div ng-show="plan.pcp"> PCP Number: {{plan.pcp}}</div></td>
                                                <td width="250">
                                                    <text ng-repeat="person in plan.enrolled">{{person.name}} 
                                                        <span ng-show="person.relationship">({{person.relationship}})</span> 
                                                        <br />
                                                    </text>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td width="150">{{employee.updated}}</td>
                                    <td width="100">
                                        <div class="inner-td-div" ng-repeat="waived in employee.waivedList">
                                            {{waived}}
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-2">
                    <div>Basic Life Insurance</br>(AD&D)</div>
                </div>
                <div class="col-sm-10" ng-if="employee.basicLifeInsurancePlan.enrolled">
                    <div class="table-responsive table-holder">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th with="180"><span>Plan Name</span></th>
                                    <th with="180"><span>Coverage Amount (USD)</span></th>
                                    <th with="180"><span>Beneficiary</span></th>
                                    <th with="180"><span>Last Update</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td with="180"><span>{{employee.basicLifeInsurancePlan.company_life_insurance.life_insurance_plan.name}}</span></td>
                                    <td with="180"><span>$ {{employee.basicLifeInsurancePlan.company_life_insurance.insurance_amount}}</span></td>
                                    <td with="180">
                                        <span class="inline" ng-repeat="beneficiary in employee.basicLifeInsurancePlan.life_insurance_beneficiary"> {{$index + 1}}. {{beneficiary.first_name}} {{beneficiary.last_name}}; </br></span>
                                    </td>
                                    <td width="180"><span>{{employee.basicLifeInsurancePlan.last_update_date}}</td>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-sm-10" ng-if="!employee.basicLifeInsurancePlan.enrolled">
                    <div class="table-responsive table-holder">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th width="280"><span>Basic Life Insurance</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td width="280">No active life insurance plan</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row" ng-show="supplementalLifeInsuranceEnabled">
                <div class="col-sm-2">    
                    <div>Supplemental Life Insurance</div>
                </div>
                <div class="col-sm-10" ng-if="!isLifeInsuranceWaived(employee.familyInsurancePlan)">
                    <div class="table-responsive table-holder">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th width="180"><span>Plan Name</span></th>
                                    <th width="250"><span>Family Member</span></th>
                                    <th width="120"><span>Elected Coverage Amount (USD)</span></th>
                                    <th width="180"><span>Beneficiary</span></th>
                                    <th width="120"><span>Last Update</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td width="180">{{employee.familyInsurancePlan.mainPlan.company_life_insurance.life_insurance_plan.name}}</td>
                                    <td colspan="2" style="padding: 0;">
                                        <table class="table">
                                            <tr ng-repeat="memberPlan in employee.familyInsurancePlan.memberPlans">
                                                <td width="250">{{memberPlan.full_name}} ({{memberPlan.relationship}})</td>
                                                <td width="120">${{memberPlan.insurance_amount}}</td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td width="180">
                                        <span class="inline" ng-repeat="beneficiary in employee.familyInsurancePlan.mainPlan.life_insurance_beneficiary"> {{$index + 1}}. {{beneficiary.first_name}} {{beneficiary.last_name}}; </br></span>
                                    </td>
                                    <td width="120">{{employee.familyInsurancePlan.mainPlan.last_update_date}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-sm-10" ng-if="isLifeInsuranceWaived(employee.familyInsurancePlan)">
                    <div class="table-responsive table-holder">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th width="280"><span>Supplemental Life Insurance</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td width="280">No active life insurance plan</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row" ng-show="employee.userStdPlan">
                <div class="col-sm-2">    
                    <div>Short Term Disability Benefits</div>
                </div>
                <div class="col-sm-10">
                    <div class="table-responsive table-holder">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th><span>Plan Name</span></th>
                                    <th><span>Benefit Amount</span></th>
                                    <th><span>Max Benefit</span></th>
                                    <th><span>Duration</span></th>
                                    <th><span>Elimination Period</span></th>
                                    <th><span>Last Updated</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{{employee.userStdPlan.company_std_insurance.std_insurance_plan.name}}</td>
                                    <td>{{employee.userStdPlan.company_std_insurance.percentage_of_salary}}% of Base Salary</td>
                                    <td>${{employee.userStdPlan.company_std_insurance.max_benefit_weekly}}/Week</td>
                                    <td>{{employee.userStdPlan.company_std_insurance.duration_in_weeks}} Weeks</td>
                                    <td>{{employee.userStdPlan.company_std_insurance.elimination_period_in_days}} Days</td>
                                    <td>{{employee.userStdPlan.last_update_date_time}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row" ng-show="employee.userLtdPlan">
                <div class="col-sm-2">    
                    <div>Long Term Disability Benefits</div>
                </div>
                <div class="col-sm-10">
                    <div class="table-responsive table-holder">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th><span>Plan Name</span></th>
                                    <th><span>Benefit Amount</span></th>
                                    <th><span>Max Benefit</span></th>
                                    <th><span>Duration</span></th>
                                    <th><span>Elimination Period</span></th>
                                    <th><span>Last Updated</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{{employee.userLtdPlan.company_ltd_insurance.ltd_insurance_plan.name}}</td>
                                    <td>{{employee.userLtdPlan.company_ltd_insurance.percentage_of_salary}}% of Base Salary</td>
                                    <td>${{employee.userLtdPlan.company_ltd_insurance.max_benefit_monthly}}/Month</td>
                                    <td>{{employee.userLtdPlan.company_ltd_insurance.duration_in_weeks}} Weeks</td>
                                    <td>{{employee.userLtdPlan.company_ltd_insurance.elimination_period_in_days}} Days</td>
                                    <td>{{employee.userLtdPlan.last_update_date_time}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-2">    
                    <div>Flexible Spending Accounts</div>
                </div>
                <div class="col-sm-10">
                    <div class="table-responsive table-holder">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th width="200"><span>Account Type</span></th>
                                    <th width="200"><span>Elected Annual Amount (USD)</span></th>
                                    <th width="200"><span>Last Update</span></th>
                                    <th width="200"><span>Last Update Reason</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td width="200">Primary Account</td>
                                    <td width="200">${{employee.fsaElection.primary_amount_per_year}}</td>
                                    <td width="200" rowspan="2" style="vertical-align:middle;">{{employee.fsaElection.last_update_date_time}}</td>
                                    <td width="200" rowspan="2" style="vertical-align:middle;">{{employee.fsaElection.update_reason}}</td>
                                </tr>
                                <tr>
                                    <td>Dependent Care Account</td>
                                    <td>${{employee.fsaElection.dependent_amount_per_year}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div><!-- / .content-body -->
